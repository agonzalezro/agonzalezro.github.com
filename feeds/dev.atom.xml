<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>agonzalezro.github.com</title><link href="http://agonzalezro.github.com/" rel="alternate"></link><link href="http://agonzalezro.github.com/feeds/dev.atom.xml" rel="self"></link><id>http://agonzalezro.github.com/</id><updated>2013-02-12T00:30:00+01:00</updated><entry><title>TechTalk: from python 2.x to python 3</title><link href="http://agonzalezro.github.com/techtalk-from-python-2x-to-python-3.html" rel="alternate"></link><updated>2013-02-12T00:30:00+01:00</updated><author><name>Álex</name></author><id>tag:agonzalezro.github.com,2013-02-12:techtalk-from-python-2x-to-python-3.html</id><summary type="html">&lt;div class="section" id="introduction"&gt;
&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;This are some notes that I took while the talk that I saw today, the original
title of the talk that I had the chance to see today was: &amp;quot;Switch to Python
3... Now... Inmediately&amp;quot; by the &lt;a class="reference external" href="http://www.russel.org.uk"&gt;professor Russel Winder&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;More or less all that you will find here is a transaction, just ordered in my
style and perhaps with some notes by myself.&lt;/p&gt;
&lt;p&gt;Python 2.x remains being the default python. Too many people and organizations
are afraid of the change.&lt;/p&gt;
&lt;p&gt;Python software foundation should declare python 3 the default python
immediately.&lt;/p&gt;
&lt;div class="section" id="problems"&gt;
&lt;h3&gt;Problems&lt;/h3&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;some big companies are telling people to don't use it.&lt;/li&gt;
&lt;li&gt;some crucial projects are not using Python 3 yet.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="companies-and-people"&gt;
&lt;h3&gt;Companies and people&lt;/h3&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;from the point of view of Russel, the problem are those companies that
doesn't want to migrate, and not the fact that the code needs to be migrate.&lt;/li&gt;
&lt;li&gt;at least they should have version 2 and 3 compatible on the codebase.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="migration"&gt;
&lt;h3&gt;Migration&lt;/h3&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;2to3&lt;/tt&gt; tool is not useful at all. Just one shot transform tool.&lt;/li&gt;
&lt;li&gt;the manual the better? From my POV (Álex) you can never let a machine this
kind of work and it usually will be a biblical proportion job for large
codebases. And more important... usually without tests :D&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="justifications"&gt;
&lt;h2&gt;Justifications&lt;/h2&gt;
&lt;p&gt;Python 2 is a dead end and python 3 is the developing future.&lt;/p&gt;
&lt;p&gt;This piece of code is compatible with both versions, why don't use them?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;exec&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Problem: &lt;tt class="docutils literal"&gt;print(x)&lt;/tt&gt; support multiple parameter in python 3, so, let's import
the function from future to have the same behaviour in python 2.x:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;__future__&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;print_function&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Let's make it bigger:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;__future__&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;division&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;absolute_import&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;print_function&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;unicode_literals&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;With this we will avoid problems with floats on divisions, add &lt;cite&gt;.&lt;/cite&gt; to the
imports, import the python3 version of print and work always with unicode.&lt;/p&gt;
&lt;p&gt;Another problem is the list-comprehensions which will change a little bit,
instead create list, they will create sets.&lt;/p&gt;
&lt;div class="section" id="some-other-problems"&gt;
&lt;h3&gt;Some other problems&lt;/h3&gt;
&lt;p&gt;python 2 is strict, but python 3 is kinda lazy.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nb"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Will produce an iterator in python 3, in python 2 is a data structure.&lt;/p&gt;
&lt;p&gt;This is one of the biggest issues into the migration, other functions with same
problems will be, for example: &lt;tt class="docutils literal"&gt;items&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;keys&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;values&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;iteritems&lt;/tt&gt;,
&lt;tt class="docutils literal"&gt;iterkeys&lt;/tt&gt; &amp;amp; &lt;tt class="docutils literal"&gt;itervalues&lt;/tt&gt; which in python 3 will become: &lt;tt class="docutils literal"&gt;items&lt;/tt&gt;,
&lt;tt class="docutils literal"&gt;keys&lt;/tt&gt; &amp;amp; &lt;tt class="docutils literal"&gt;values&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;If you want a data structure instead a iterator, you should make it manually:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="c"&gt;# python 2.x&lt;/span&gt;
&lt;span class="nb"&gt;tuple&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="c"&gt;# python 3&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="concurrency"&gt;
&lt;h3&gt;Concurrency&lt;/h3&gt;
&lt;p&gt;At least IronPython and Jython do not have a &lt;a class="reference external" href="http://wiki.python.org/moin/GlobalInterpreterLock"&gt;GIL&lt;/a&gt; as CPython and PyPy do.&lt;/p&gt;
&lt;p&gt;There is an experiment to mode GIL out of PyPy.&lt;/p&gt;
&lt;dl class="docutils"&gt;
&lt;dt&gt;Actors&lt;/dt&gt;
&lt;dd&gt;communicate processes with messages.&lt;/dd&gt;
&lt;dt&gt;Dataflow&lt;/dt&gt;
&lt;dd&gt;operators connected by channels with activity triggered by arrival of data on
the channels.&lt;/dd&gt;
&lt;dt&gt;CSP&lt;/dt&gt;
&lt;dd&gt;we have &lt;a class="reference external" href="http://code.google.com/p/pycsp/"&gt;PyCSP&lt;/a&gt; and &lt;a class="reference external" href="https://github.com/python-concurrency/python-csp"&gt;PythonCSP&lt;/a&gt;.&lt;/dd&gt;
&lt;/dl&gt;
&lt;/div&gt;
&lt;div class="section" id="data-parallelism"&gt;
&lt;h3&gt;Data parallelism&lt;/h3&gt;
&lt;p&gt;Transform a sequence to another sequence where all individual actions happen at
the same time. Python has not a lot of utilities for that, since Go or D do.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="futures-are-the-future"&gt;
&lt;h3&gt;Futures are the future&lt;/h3&gt;
&lt;dl class="docutils"&gt;
&lt;dt&gt;&lt;cite&gt;concurrent.futures&lt;/cite&gt;&lt;/dt&gt;
&lt;dd&gt;python 3.2 package to abstract over threads and processes to give an
asynchronous function call and future system.&lt;/dd&gt;
&lt;/dl&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="under-challengue"&gt;
&lt;h2&gt;Under challengue&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Go is taking over from Python, because it's native and it has a solid concurrency models (CSP).&lt;/li&gt;
&lt;li&gt;D is on the market too.&lt;/li&gt;
&lt;li&gt;Native programs are almost always quicker than python.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="funny-points"&gt;
&lt;h2&gt;Funny points&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;One rule of the guy is to use one month a year just &lt;tt class="docutils literal"&gt;ed&lt;/tt&gt; no &lt;tt class="docutils literal"&gt;vim&lt;/tt&gt; or
&lt;tt class="docutils literal"&gt;emacs&lt;/tt&gt; rubbish.&lt;/li&gt;
&lt;li&gt;C has a rubbish syntax in comparison with Python. You will touch your head
if you check some C++ code: why!?&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</summary><category term="python"></category><category term="migration"></category><category term="python3k"></category></entry><entry><title>codereview from the POV of a noob</title><link href="http://agonzalezro.github.com/codereview-from-the-pov-of-a-noob.html" rel="alternate"></link><updated>2013-01-29T19:16:00+01:00</updated><author><name>Álex</name></author><id>tag:agonzalezro.github.com,2013-01-29:codereview-from-the-pov-of-a-noob.html</id><summary type="html">&lt;p&gt;Hi g(irl|uy)s! I would like to start with a disclaimer:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;I am not (and I don't pretend to be) a craftmanship trooper (they like to be
called like that isn't?), senior engineer with more years of experience that
the technology has, guru, blablabla...&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;I just want to show my opinion about this process (which I really like!). But
more important that share my opinion, is to know what is yours, so, please,
comment!&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Today we had an interesting conversation at work about how we make and how we
should make our codereviews. My point of view is that there are three different
things to check:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;strong&gt;Code syntax.&lt;/strong&gt; It's a part that should be 100% automagically done. I
usually work with python and I let this work to &lt;a class="reference external" href="http://pypi.python.org/pypi/flake8"&gt;Flake8&lt;/a&gt; on vim, but it's
always good to have a &lt;cite&gt;git&lt;/cite&gt; hook.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Reusability and maintainability.&lt;/strong&gt; I am afraid that this is the worst part
to check, it's a manual process and it is really subjective. Some people can
think that use &lt;cite&gt;itertools&lt;/cite&gt; with 2 lambda functions is pretty clear and
comprehensible, other people can think that this code is the result of a
dirty mind developer.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Functionality.&lt;/strong&gt; Automated test! All the test that you can, and of course,
they worst the time that you will spent developing them. There are things
that can not be easily tested but in that case let's suppose that you were
clever enough to test them manually and in the case that is possible you
can show it to anybody else (this really helps!).&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;As I said the point 1 can be (and should be) automated! It's really easy to do,
the same way that &lt;a class="reference external" href="http://pypi.python.org/pypi/flake8"&gt;Flake8&lt;/a&gt; exists for python, I am pretty sure that you will
have one for your favourite language. It's really painful get back a pull
request just for some spaces that are not in place.&lt;/p&gt;
&lt;p&gt;For the point 3, yep, let me jump the second for now. Unit testing, integration
testing, functional testing... whatever you want, but try to automate it. This
+ a CI server will make your live really &amp;quot;easy&amp;quot;!&lt;/p&gt;
&lt;p&gt;And finally, about the second point. Each developer have their way to do the
things, but usually there are some points that can be fixed and sometimes
because we don't know, other times just because we are lazy but we post code
like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt;
        &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt;
        &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;is_authenticated&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;has_perm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;write&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;HttpResponse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dumps&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;{authorized: True, &amp;#39;&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;: a}))&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;HttpResponse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dumps&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;{authorized: True, &amp;#39;&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;: a}))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is just an example, but you should agree with me that it's really easy to
improve. This is what, in my opinion should be more checked in the reviews.&lt;/p&gt;
&lt;p&gt;This was just an example (please, remember that :D), but could be improved with
something like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;proper_function_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;proper_variable_name&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;This is an amazing function that will do just a thing.&lt;/span&gt;

&lt;span class="sd"&gt;    :param proper_variable_name: what I am?&lt;/span&gt;

&lt;span class="sd"&gt;    :returns: An HttpResponse object with the following JSON content:&lt;/span&gt;

&lt;span class="sd"&gt;        {&amp;#39;authorized&amp;#39;: bool,&lt;/span&gt;
&lt;span class="sd"&gt;         &amp;#39;proper_variable_name: int}&lt;/span&gt;

&lt;span class="sd"&gt;    &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;is_authorized&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt;
        &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;is_authenticated&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt;
        &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;has_perm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;write-resource&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;HttpResponse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dumps&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;
            &lt;span class="s"&gt;&amp;#39;authorized&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;is_authorized&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s"&gt;&amp;#39;proper_variable_name&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;proper_variable_name&lt;/span&gt;
        &lt;span class="p"&gt;})&lt;/span&gt;
    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Those were the improvements (again, remember that it's just an example):&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Give a proper name to the function. Don't be afraid, everybody has
autocompletion! :D&lt;/li&gt;
&lt;li&gt;Give a proper name to the vars.&lt;/li&gt;
&lt;li&gt;DOCUMENT! In this example, ready for Sphinx.&lt;/li&gt;
&lt;li&gt;Simplify the if statements, actually, after take a look you made it
dissapear.&lt;/li&gt;
&lt;li&gt;One return.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;So, what's your opinion? What do you think that is more important in a
codereview.&lt;/p&gt;
</summary><category term="codereview"></category><category term="python"></category></entry><entry><title>backbone.js + underscore: small intro</title><link href="http://agonzalezro.github.com/backbonejs-underscore-small-intro.html" rel="alternate"></link><updated>2012-11-01T00:30:00+01:00</updated><author><name>Álex</name></author><id>tag:agonzalezro.github.com,2012-11-01:backbonejs-underscore-small-intro.html</id><summary type="html">&lt;p&gt;Today, &lt;a class="reference external" href="http://twitter.com/olegpidsadnyi/"&gt;Oleg&lt;/a&gt; gave a talk about backbone at
&lt;a class="reference external" href="http://paylogic.nl/"&gt;Paylogic&lt;/a&gt;. We were using it for a really fancy
application inside our backoffice, it was quite funny write it and Oleg
decided to share the knowledge.&lt;/p&gt;
&lt;p&gt;I used the techtalk to take some notes and, since this piece of code will
have no sense out of our backoffice, I've written a small example that you can
find as a &lt;a class="reference external" href="https://gist.github.com/3982819"&gt;gist&lt;/a&gt; on my github. I will use it to explain to you some of the
useful things that you can do with backbone and underscore. Feel free to
improve it.&lt;/p&gt;
&lt;p&gt;This is only a introductory post, if you want advance stuff you should go to
the &lt;a class="reference external" href="http://backbonejs.org/"&gt;backbone official documentation&lt;/a&gt; &amp;amp; &lt;a class="reference external" href="http://underscorejs.org/"&gt;underscore
docs&lt;/a&gt;.&lt;/p&gt;
&lt;div class="section" id="why"&gt;
&lt;h2&gt;Why?&lt;/h2&gt;
&lt;p&gt;Backbone is really useful when you make complex GUIs on client side. You can
make your code like in a desktop app using events to handle the actions. It's
not needed to pass around instances of parents views, let's use only the
events for that purpose, and let the child decide.&lt;/p&gt;
&lt;p&gt;You have models too, that you can sync (or not) with the server.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="models"&gt;
&lt;h2&gt;Models&lt;/h2&gt;
&lt;p&gt;In backbone you can have local model and sync them with the server or with
local storage (not explained in this intro). In our example we will:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Create a collection to save our objects (type Item) in.&lt;/li&gt;
&lt;li&gt;Create the model Item.&lt;/li&gt;
&lt;li&gt;Create 2 object type Item inside this collection.&lt;/li&gt;
&lt;li&gt;Render them.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The 3 points can be made only with these lines of code. It's really simple!
(after know how to do it :p):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;Item&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;Backbone&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Model&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;extend&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;Items&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;Backbone&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Collection&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;extend&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;
  &lt;span class="nx"&gt;model&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;Item&lt;/span&gt;
&lt;span class="p"&gt;});&lt;/span&gt;

&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;items&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;Items&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="nx"&gt;items&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;add&lt;/span&gt;&lt;span class="p"&gt;([{&lt;/span&gt;&lt;span class="nx"&gt;name&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;foo&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;name&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;bar&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}]);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;dl class="docutils"&gt;
&lt;dt&gt;&lt;strong&gt;Note&lt;/strong&gt;&lt;/dt&gt;
&lt;dd&gt;Setting values in the objects With .set will trigger the event
change. You can silent it in case that needed, but it's really useful, for
example, to save it.&lt;/dd&gt;
&lt;dt&gt;&lt;strong&gt;Second note&lt;/strong&gt;&lt;/dt&gt;
&lt;dd&gt;backbone is f***ing clever! Imagine, you are changing a name, if the
name has changed on the collection, the event will be raised, if not, it will
not. This means that if you are editing, but finally you change your mind and
you didn't made any change, the event will not be raised.&lt;/dd&gt;
&lt;/dl&gt;
&lt;/div&gt;
&lt;div class="section" id="events"&gt;
&lt;h2&gt;Events&lt;/h2&gt;
&lt;p&gt;They are really useful to remove dependencies between elements. For example,
with jQuery if you change a element from another, the first one needs to know
about the second. With backbone you can catch the event with the child element
and do whatever you want with it.&lt;/p&gt;
&lt;p&gt;On the example of my &lt;a class="reference external" href="https://gist.github.com/3982819"&gt;gist&lt;/a&gt; I show an alert box with the name of the element.
But you could, for example, change it to an editable input.&lt;/p&gt;
&lt;p&gt;This is the code of the example:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;ItemView&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;Backbone&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;View&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;extend&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;
  &lt;span class="p"&gt;...&lt;/span&gt;
  &lt;span class="nx"&gt;events&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;dblclick&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;onDoubleClick&amp;quot;&lt;/span&gt;
  &lt;span class="p"&gt;},&lt;/span&gt;
  &lt;span class="p"&gt;...&lt;/span&gt;
  &lt;span class="nx"&gt;onDoubleClick&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;ev&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;text&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;$&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;trim&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;ev&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;target&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;text&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
    &lt;span class="nx"&gt;alert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Hey! Why do you click on &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;text&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;?&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;ev&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;//Play with this :)&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;});&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We are binding the &lt;tt class="docutils literal"&gt;dblclick&lt;/tt&gt; event to the function &lt;tt class="docutils literal"&gt;onDoubleClick&lt;/tt&gt;. This
function will receive the event, and the event will have the target (in this
case the &lt;tt class="docutils literal"&gt;&amp;lt;li/&amp;gt;&lt;/tt&gt; that we are clicking.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="underscore"&gt;
&lt;h2&gt;Underscore&lt;/h2&gt;
&lt;p&gt;It's really useful to Work with collections. In out example we are using it to
iterate over the items:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nx"&gt;render&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="nx"&gt;_&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;each&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;items&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;models&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;item&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;itemview&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;ItemView&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;item&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="nx"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;el&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;itemview&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;render&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="nx"&gt;el&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you read carefully this piece of code you will realize that we are
instantiating a new ItemView for each particular item, so it has its own
container element created on the fly, re-renderable each time when data is
updated and all events are delegated to this element.&lt;/p&gt;
&lt;p&gt;The amazing thing that you can do with underscore is use templates (yes, like
jinja or django-templates, but in JS)! And we are doing it:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nt"&gt;&amp;lt;script&amp;gt;&lt;/span&gt;
  &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;ItemView&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;Backbone&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;View&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;extend&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;
  &lt;span class="p"&gt;...&lt;/span&gt;
  &lt;span class="nx"&gt;template&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;_&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;template&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;#item-template&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;html&lt;/span&gt;&lt;span class="p"&gt;()),&lt;/span&gt;
  &lt;span class="p"&gt;...&lt;/span&gt;
  &lt;span class="nx"&gt;render&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
     &lt;span class="nx"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;el&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;html&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;template&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;item&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;toJSON&lt;/span&gt;&lt;span class="p"&gt;()));&lt;/span&gt;
     &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;},&lt;/span&gt;
  &lt;span class="p"&gt;...&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;script &lt;/span&gt;&lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;text/template&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;item-template&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="o"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="nx"&gt;name&lt;/span&gt; &lt;span class="o"&gt;%&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="extra-ball"&gt;
&lt;h2&gt;Extra ball&lt;/h2&gt;
&lt;p&gt;Use &lt;tt class="docutils literal"&gt;_.debounce&lt;/tt&gt; to don't call the functions thousands of times, example
drag&amp;amp;dropping an element it will be useful.&lt;/p&gt;
&lt;p&gt;For example in our project we had to sort with drag and drop some elements of a
list, instead send this event in each drag movement, we made it after 200s
being quiet with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nx"&gt;onChange&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;_&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;debounce&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;ev&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;pools&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;save&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="mi"&gt;200&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Please comment your thoughts about the post. We are all here to learn, and it's
really easy that I made some mistake explaining this. Furhtermore, I know that
my English is not really good, so, I will apreciate constructive comments about
it too :)&lt;/p&gt;
&lt;p&gt;Enjoy it!&lt;/p&gt;
&lt;/div&gt;
</summary><category term="backbone"></category><category term="undercore"></category><category term="javascript"></category><category term="gui"></category></entry></feed>