
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>
agonzalezro.github.io
</title>

    <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">

    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap-theme.min.css">
  </head>

  <body>
    <div class="navbar navbar-default navbar-static-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">agonzalezro.github.io</a>
        </div>
        
        
        <div class="navbar-collapse collapse">
          
          <ul class="nav navbar-nav">
            
              <li><a href="/archives.html">Archive</a></li>
            
            
            <li><a href="/pages/about.html">About</a></li>
            
          </ul>
          
          
          <ul class="nav navbar-nav navbar-right">
            
            <li class="dropdown">
            <a href="#" data-toggle="dropdown">Categories <b class="caret"></b></a>
            <ul class="dropdown-menu">
              
              
              <li>
              <a href="/category/blog.html">blog <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/category/dev.html">dev <span class="badge pull-right">2</span></a>
              </li>
              
              
              <li>
              <a href="/category/gnome.html">gnome <span class="badge pull-right">2</span></a>
              </li>
              
              
              <li>
              <a href="/category/go.html">go <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/category/linux.html">linux <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/category/talks.html">talks <span class="badge pull-right">8</span></a>
              </li>
              
              
              <li>
              <a href="/category/vim.html">vim <span class="badge pull-right">1</span></a>
              </li>
              
            </ul>
            </li>
            
            
            <li class="dropdown">
            <a href="#" data-toggle="dropdown">Tags <b class="caret"></b></a>
            <ul class="dropdown-menu">
              
              
              <li>
              <a href="/tag/1.5.html">1.5 <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/apache.html">apache <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/ar9285.html">ar9285 <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/ath9k.html">ath9k <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/atheros.html">atheros <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/backbone.html">backbone <span class="badge pull-right">2</span></a>
              </li>
              
              
              <li>
              <a href="/tag/bensday.html">bensday <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/carbon.html">carbon <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/celery.html">celery <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/clarity.html">clarity <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/codereview.html">codereview <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/colors.html">colors <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/desertEx.html">desertEx <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/desktop.html">desktop <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/diamond.html">diamond <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/django.html">django <span class="badge pull-right">3</span></a>
              </li>
              
              
              <li>
              <a href="/tag/djugl.html">djugl <span class="badge pull-right">3</span></a>
              </li>
              
              
              <li>
              <a href="/tag/flask.html">flask <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/friends.html">friends <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/gnome.html">gnome <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/gnome3.html">gnome3 <span class="badge pull-right">2</span></a>
              </li>
              
              
              <li>
              <a href="/tag/go.html">go <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/golang.html">golang <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/graphite.html">graphite <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/groningen.html">groningen <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/gui.html">gui <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/hackathon.html">hackathon <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/haproxy.html">haproxy <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/hate.html">hate <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/javascript.html">javascript <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/jelleybeans.html">jelleybeans <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/lanyrd.html">lanyrd <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/layout.html">layout <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/linux.html">linux <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/lowspeed.html">lowspeed <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/march.html">march <span class="badge pull-right">3</span></a>
              </li>
              
              
              <li>
              <a href="/tag/metaclass.html">metaclass <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/migration.html">migration <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/mongodb.html">mongodb <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/monitoring.html">monitoring <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/my-english-is-crap.html">my-english-is-crap <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/mysql.html">mysql <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/paylogic.html">paylogic <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/pelican.html">pelican <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/polo.html">polo <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/postgresql.html">postgresql <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/pygrunn.html">pygrunn <span class="badge pull-right">4</span></a>
              </li>
              
              
              <li>
              <a href="/tag/python.html">python <span class="badge pull-right">6</span></a>
              </li>
              
              
              <li>
              <a href="/tag/python3k.html">python3k <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/readable.html">readable <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/redis.html">redis <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/s3.html">s3 <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/scala.html">scala <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/slides.html">slides <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/solr.html">solr <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/static.html">static <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/talk.html">talk <span class="badge pull-right">2</span></a>
              </li>
              
              
              <li>
              <a href="/tag/theme.html">theme <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/thrift.html">thrift <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/ubuntu.html">ubuntu <span class="badge pull-right">2</span></a>
              </li>
              
              
              <li>
              <a href="/tag/undercore.html">undercore <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/unity.html">unity <span class="badge pull-right">2</span></a>
              </li>
              
              
              <li>
              <a href="/tag/varnish.html">varnish <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/wifi.html">wifi <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/winsterday.html">winsterday <span class="badge pull-right">1</span></a>
              </li>
              
            </ul>
            </li>
            
          </ul>
          
        </div>
        
      </div>
    </div>

    <div class="container col-lg-8 col-lg-offset-2">
      



<article>
<h1>DJUGL: Inside Lanyrd architecture</h1>

<p>

<span class="label label-default">by Álex</span>



<span class="label label-default">2013-03-12 20:30</span>



<a class="label label-success" href="/category/talks.html">talks</a>




<a class="label label-info" href="/tag/.html"></a>

<a class="label label-info" href="/tag/djugl.html">djugl</a>

<a class="label label-info" href="/tag/march.html">march</a>

<a class="label label-info" href="/tag/lanyrd.html">lanyrd</a>

<a class="label label-info" href="/tag/django.html">django</a>

<a class="label label-info" href="/tag/solr.html">solr</a>

<a class="label label-info" href="/tag/celery.html">celery</a>

<a class="label label-info" href="/tag/postgresql.html">postgresql</a>

<a class="label label-info" href="/tag/redis.html">redis</a>

<a class="label label-info" href="/tag/mongodb.html">mongodb</a>

<a class="label label-info" href="/tag/mysql.html">mysql</a>

<a class="label label-info" href="/tag/varnish.html">varnish</a>

<a class="label label-info" href="/tag/haproxy.html">haproxy</a>

<a class="label label-info" href="/tag/s3.html">s3</a>

<a class="label label-info" href="/tag/.html"></a>


</p>

<p>This talk was just amazing! Andrew Godwin
(<a href="http://twitter.com/andrewgodwin">@andrewgodwin</a> or <a href="http://areacode.org">http://areacode.org</a>) gave
us talk about the internal architecture that they are using at
<a href="http://lanyrd.com">lanyrd.com</a>.</p>

<p>I would say 2 things:</p>

<ul>
<li>Even before that talk I was using lanyrd, it&rsquo;s a really good service
if you are organizing some kind of event.</li>
<li>At <a href="http://greenmangaming.com">GreenManGaming</a> we are using a very
similar infrastructure, which I think that means that when 2
different companies without any relation are sharing so many layers,
it should be good!</li>
</ul>

<p>After this lines you will fine almost a C&amp;P of the Andrew slide that you
can find here: <a href="https://speakerdeck.com/andrewgodwin/inside-lanyrds-architecture">https://speakerdeck.com/andrewgodwin/inside-lanyrds-architecture</a>, but
there are some additional notes added by me.</p>

<h2>The Origin Story</h2>

<p>They launch in Aug&rsquo;10 and after half an hour going down because the load
was too high</p>

<p>In Sep&rsquo;11 they got some inversion that allows them to start with the
curren architecture.</p>

<p>The ecosystem that they need to take care of:</p>

<ul>
<li>conferences</li>
<li>profile pages</li>
<li>emails</li>
<li>dashboard</li>
<li>coverage</li>
<li>topics</li>
<li>guides</li>
<li>mobile app</li>
<li>&hellip;</li>
</ul>

<p>And all this with just 6 technical guys! That know this:</p>

<ul>
<li>You don&rsquo;t need a big team to write a complex product.</li>
<li>Communication is absolutely key.</li>
<li>Using Open Source well is also crucial.</li>
</ul>

<h2>What they run on</h2>

<p>Almost all the site is written in django with some spices:</p>

<ul>
<li>celery for the background tasks.</li>
<li>management cron jobs.</li>
<li>served by Gunicorn containers.</li>
</ul>

<p>The main services that you can find on, are this:</p>

<h3>PostreSQL</h3>

<ul>
<li>main data store for everythin except upload master &amp; replicated
around 80G in 5 DBs each server run in RAID1</li>
</ul>

<h3>Redis</h3>

<ul>
<li>Task queue transport for Celery and tweet listeners,</li>
<li>Contains user sets for every conference, user and topic.</li>
<li>Used for efficient narrowing of queries before Solr is hit,</li>
</ul>

<h3>Solr</h3>

<ul>
<li>Stores conferences, users, sessions and more&hellip;</li>
<li>Very rich metada on each item.</li>
<li>Heavy use of sharding throughout the site.</li>
<li>They run Solr in master and replicated slave.</li>
</ul>

<h3>Varnish</h3>

<ul>
<li>First point of call for all requests.</li>
<li>Caches most anonymous requests.</li>
<li>Enforces read-only mode if enabled.</li>
<li>One used an one hot spare at all times.</li>
</ul>

<h3>HAProxy</h3>

<ul>
<li>Sits behind Varnish.</li>
<li>Distributes load amongst frontend servers.</li>
<li>Re-routes request during deploys.</li>
<li>They always have 2 up identically configured.</li>
</ul>

<h3>S3</h3>

<ul>
<li>Stores all uploaded files from users.</li>
<li>Uploads forms post directly to S3.</li>
<li>Servers all static assets for the site (images, Css, JS).</li>
<li>Static assets are versioned with hash to help cache break.</li>
</ul>

<h2>What they have eliminated</h2>

<p>It&rsquo;s a shame because I am reading it in several places, but it seems
that after the hype a lot of companies are eliminating MongoDB from
their backends.</p>

<h3>MongoDB</h3>

<ul>
<li>Stored analytics, logs and some other data.</li>
<li>Lack of schema meant some bad data persisted. poor complex query
performance.</li>
</ul>

<p>Nevertheless they think that it&rsquo;s a really useful tool for quick
prototyping.</p>

<h3>MySQL</h3>

<ul>
<li>Primary data store for things that where not stored in MongoDB.</li>
<li>Very poor complex query performance.</li>
<li>No advances field types.</li>
<li>Full database locks during schema changes.</li>
</ul>

<h2>The great move of 2012</h2>

<p>They move from EC2 to Softlayer basically because it&rsquo;s real hardware, if
something fail, just change it). From MySQL to PostgreSQL for the
reasons that he explained before.</p>

<h3>Why?</h3>

<p>It seems that lanyrd has a very predictable traffic, they can know
months in advanced what is the expected load.</p>

<h3>How</h3>

<p>Both moves required database downtime, couple of tables were really big,
any change on that table means around 20-30min of downtime.</p>

<ol>
<li>Replicate Solr and Redis across to new servers.</li>
<li>Enter RO mode.</li>
<li>Dump MySQL data.</li>
<li>Convert MySQL dump into PostgreSQL dump.</li>
<li>Load PostgresSQL dump.</li>
<li>Re-point DNS, proxy request from old server.</li>
<li>Exit RO mode.</li>
</ol>

<p>After all this process they can say that they have been 1 hour and a
half in Read Only mode but without any downtime at all.</p>

<p>From their experience, the advantages of have a content site are that
the RO mode is completely viable. They logged out all the people from
the site and in the mean time Varnish was blocking all the POST request
&amp; cache aggressively.</p>

<h2>Always be deploying</h2>

<ul>
<li>They deploy at least 5 times a day, if not 20.</li>
<li>Nearly all code goes into master or short-lived branches.</li>
<li>Anything released is feature flagged.

<ul>
<li>simple named boolean toggles.</li>
<li>settable by user, user tag, or conference.</li>
<li>can change templates, view code, URLs, etc&hellip;</li>
</ul></li>
</ul>

<p>Just a quick note: if you had never used this feature you should try
something like <a href="https://github.com/disqus/gargoyle">gargoyle</a>. It&rsquo;s just
amazing to deploy some functionalities to just some of your users. I
don&rsquo;t know what they are using, but if it&rsquo;s not this, it should be
something similar.</p>

<h2>Legacy code &amp; decisions</h2>

<ul>
<li>It&rsquo;s fine to have some legacy code. It can speed thing ups.</li>
<li>A good chunk of their legacy code is gone, some remains (I would say
like in all the big projects :D).</li>
<li>Big schema change get harder and harder.</li>
</ul>

<p>Awareness (every ppl know what is going on) &amp; always deployable (master
branch always shippable).</p>

<h2>Small and nimble</h2>

<ul>
<li>Continue deployment and development style allows easy project
changing</li>
<li>No long approval processes.</li>
</ul>

<h2>Fix it while you can</h2>

<ul>
<li>The bigger you get, the harder a fix.</li>
<li>They moved to PostgreSQL just in time.</li>
<li>Big schema changes now take days of coding.</li>
</ul>

<p><a class="btn btn-success" href="djugl-inside-lanyrd-architecture.html#comments">Leave a comment!</a></p>

<article>
<h1>DJUGL: Advanced python trought Django: Metaclasses</h1>

<p>

<span class="label label-default">by Álex</span>



<span class="label label-default">2013-03-12 20:00</span>



<a class="label label-success" href="/category/talks.html">talks</a>




<a class="label label-info" href="/tag/.html"></a>

<a class="label label-info" href="/tag/djugl.html">djugl</a>

<a class="label label-info" href="/tag/march.html">march</a>

<a class="label label-info" href="/tag/django.html">django</a>

<a class="label label-info" href="/tag/python.html">python</a>

<a class="label label-info" href="/tag/metaclass.html">metaclass</a>

<a class="label label-info" href="/tag/.html"></a>


</p>

<p>This talk was made by Peter Ingles, you can check his twitter here:
<a href="http://twitter.com/inglesp">@inglesp</a>.</p>

<p>What is write above is basically what he said, mixed with some of my
thoughts. The talk was really good, and even using metaclasses almost
daily (<code>forms.Form</code>) you don&rsquo;t feel the power of them until somebody
explain it to you (shame on me!).</p>

<p>In all the Peter example we was using Django 1.4.</p>

<p>The typical example as I said before is <code>forms.Form</code> from django.</p>

<p>For some reason, Peter was in love with the Ponies, so, he tried to
create some meta stable:</p>

<pre><code class="python">class A(models.Model):
    class Meta:
        app_label = 'ponies'
        abstract = True

class Stable(models.Models):
    class Meta:
        app_label = 'ponies'
    name = models.CharField()
    stable = models.ForeignKey(Stable)
</code></pre>

<h2>Create classes dinamycally:</h2>

<pre><code class="python">def init(self, x):
    self.x =x

name = 'ExampleClass'
bases = (object, )
attrs = {
    '__init__': init
}
instance = type(name, bases, attrs)
</code></pre>

<p>This is a pretty coold way to create classes at runtime.</p>

<h2>type</h2>

<p>I don&rsquo;t know you, but I was always using <code>type</code> just for the type
comparation, but never for create classes&hellip;</p>

<p>Some &ldquo;strange&rdquo; (puzzling) things about <code>type</code> is that <code>type</code> is a class
of type type:</p>

<pre><code class="python">type(type)
&lt;type 'type'&gt;
</code></pre>

<p>And we can subclass <code>type</code>:</p>

<pre><code class="python">class A(type):
    pass
</code></pre>

<h2>Python 3</h2>

<p>The syntax to create a metaclass is sightly different:</p>

<pre><code class="python">class Form(metaclass=Formtype):
    ...
</code></pre>

<h2>Key takeaways</h2>

<ul>
<li>classes are factories for creating objects.</li>
<li>we can create classes dynamically at runtime.</li>
<li>metaclasses are factories for creating classes.</li>
<li>we can control what happens when we create classes</li>
</ul>

<h2>The slides</h2>

<p>You can find the interactive talk of Peter in his github account:
<a href="http://github.com/inglesp/prescons">http://github.com/inglesp/prescons</a></p>

<p>Enjoy them!</p>

<p><a class="btn btn-success" href="djugl-advanced-python-trought-django-metaclasses.html#comments">Leave a comment!</a></p>

<article>
<h1>TechTalk: from python 2.x to python 3</h1>

<p>

<span class="label label-default">by Álex</span>



<span class="label label-default">2013-02-12 00:30</span>



<a class="label label-success" href="/category/talks.html">talks</a>




<a class="label label-info" href="/tag/.html"></a>

<a class="label label-info" href="/tag/python.html">python</a>

<a class="label label-info" href="/tag/migration.html">migration</a>

<a class="label label-info" href="/tag/python3k.html">python3k</a>

<a class="label label-info" href="/tag/.html"></a>


</p>

<h2>Introduction</h2>

<p>This are some notes that I took while the talk that I saw today, the
original title of the talk that I had the chance to see today was:
&ldquo;Switch to Python 3&hellip; Now&hellip; Inmediately&rdquo; by the <a href="http://www.russel.org.uk">professor Russel
Winder</a>.</p>

<p>More or less all that you will find here is a transaction, just ordered
in my style and perhaps with some notes by myself.</p>

<p>Python 2.x remains being the default python. Too many people and
organizations are afraid of the change.</p>

<p>Python software foundation should declare python 3 the default python
immediately.</p>

<h3>Problems</h3>

<ul>
<li>some big companies are telling people to don&rsquo;t use it.</li>
<li>some crucial projects are not using Python 3 yet.</li>
</ul>

<h3>Companies and people</h3>

<ul>
<li>from the point of view of Russel, the problem are those companies
that doesn&rsquo;t want to migrate, and not the fact that the code needs
to be migrate.</li>
<li>at least they should have version 2 and 3 compatible on the
codebase.</li>
</ul>

<h3>Migration</h3>

<ul>
<li><code>2to3</code> tool is not useful at all. Just one shot transform tool.</li>
<li>the manual the better? From my POV (Álex) you can never let a
machine this kind of work and it usually will be a biblical
proportion job for large codebases. And more important&hellip; usually
without tests :D</li>
</ul>

<h2>Justifications</h2>

<p>Python 2 is a dead end and python 3 is the developing future.</p>

<p>This piece of code is compatible with both versions, why don&rsquo;t use them?</p>

<pre><code class="python">print(x)
exec(x)
</code></pre>

<p>Problem: <code>print(x)</code> support multiple parameter in python 3, so, let&rsquo;s
import the function from future to have the same behaviour in python
2.x:</p>

<pre><code class="python">from __future__ import print_function
</code></pre>

<p>Let&rsquo;s make it bigger:</p>

<pre><code class="python">from __future__ import (
    division,
    absolute_import,
    print_function,
    unicode_literals
)
</code></pre>

<p>With this we will avoid problems with floats on divisions, add . to the
imports, import the python3 version of print and work always with
unicode.</p>

<p>Another problem is the list-comprehensions which will change a little
bit, instead create list, they will create sets.</p>

<h3>Some other problems</h3>

<p>python 2 is strict, but python 3 is kinda lazy.</p>

<pre><code class="python">map(lambda x: x * x, filter(lambda x: x % 10 == 0, range(100))
</code></pre>

<p>Will produce an iterator in python 3, in python 2 is a data structure.</p>

<p>This is one of the biggest issues into the migration, other functions
with same problems will be, for example: <code>items</code>, <code>keys</code>, <code>values</code>,
<code>iteritems</code>, <code>iterkeys</code> &amp; <code>itervalues</code> which in python 3 will become:
<code>items</code>, <code>keys</code> &amp; <code>values</code>.</p>

<p>If you want a data structure instead a iterator, you should make it
manually:</p>

<pre><code class="python">range(10)  # python 2.x
tuple(range(10)  # python 3
</code></pre>

<h3>Concurrency</h3>

<p>At least IronPython and Jython do not have a
<a href="http://wiki.python.org/moin/GlobalInterpreterLock">GIL</a> as CPython and
PyPy do.</p>

<p>There is an experiment to mode GIL out of PyPy.</p>

<p>Actors
:   communicate processes with messages.</p>

<p>Dataflow
:   operators connected by channels with activity triggered by arrival
    of data on the channels.</p>

<p>CSP
:   we have <a href="http://code.google.com/p/pycsp/">PyCSP</a> and
    <a href="https://github.com/python-concurrency/python-csp">PythonCSP</a>.</p>

<h3>Data parallelism</h3>

<p>Transform a sequence to another sequence where all individual actions
happen at the same time. Python has not a lot of utilities for that,
since Go or D do.</p>

<h3>Futures are the future</h3>

<p>concurrent.futures
:   python 3.2 package to abstract over threads and processes to give an
    asynchronous function call and future system.</p>

<h2>Under challengue</h2>

<ul>
<li>Go is taking over from Python, because it&rsquo;s native and it has a
solid concurrency models (CSP).</li>
<li>D is on the market too.</li>
<li>Native programs are almost always quicker than python.</li>
</ul>

<h2>Funny points</h2>

<ul>
<li>One rule of the guy is to use one month a year just <code>ed</code> no <code>vim</code> or
<code>emacs</code> rubbish.</li>
<li>C has a rubbish syntax in comparison with Python. You will touch
your head if you check some C++ code: why!?</li>
</ul>

<p><a class="btn btn-success" href="techtalk-from-python-2x-to-python-3.html#comments">Leave a comment!</a></p>

<article>
<h1>codereview from the POV of a noob</h1>

<p>

<span class="label label-default">by Álex</span>



<span class="label label-default">2013-01-29 19:16</span>



<a class="label label-success" href="/category/dev.html">dev</a>




<a class="label label-info" href="/tag/.html"></a>

<a class="label label-info" href="/tag/codereview.html">codereview</a>

<a class="label label-info" href="/tag/python.html">python</a>

<a class="label label-info" href="/tag/.html"></a>


</p>

<p>Hi g(irl|uy)s! I would like to start with a disclaimer:</p>

<p><em>I am not (and I don&rsquo;t pretend to be) a craftmanship trooper (they like
to be called like that isn&rsquo;t?), senior engineer with more years of
experience that the technology has, guru, blablabla&hellip;</em></p>

<p><em>I just want to show my opinion about this process (which I really
like!). But more important that share my opinion, is to know what is
yours, so, please, comment!</em></p>

<p>Today we had an interesting conversation at work about how we make and
how we should make our codereviews. My point of view is that there are
three different things to check:</p>

<ol>
<li><strong>Code syntax.</strong> It&rsquo;s a part that should be 100% automagically done.
I usually work with python and I let this work to
<a href="http://pypi.python.org/pypi/flake8">Flake8</a> on vim, but it&rsquo;s always
good to have a git hook.</li>
<li><strong>Reusability and maintainability.</strong> I am afraid that this is the
worst part to check, it&rsquo;s a manual process and it is really
subjective. Some people can think that use itertools with 2 lambda
functions is pretty clear and comprehensible, other people can think
that this code is the result of a dirty mind developer.</li>
<li><strong>Functionality.</strong> Automated test! All the test that you can, and of
course, they worst the time that you will spent developing them.
There are things that can not be easily tested but in that case
let&rsquo;s suppose that you were clever enough to test them manually and
in the case that is possible you can show it to anybody else (this
really helps!).</li>
</ol>

<p>As I said the point 1 can be (and should be) automated! It&rsquo;s really easy
to do, the same way that <a href="http://pypi.python.org/pypi/flake8">Flake8</a>
exists for python, I am pretty sure that you will have one for your
favourite language. It&rsquo;s really painful get back a pull request just for
some spaces that are not in place.</p>

<p>For the point 3, yep, let me jump the second for now. Unit testing,
integration testing, functional testing&hellip; whatever you want, but try to
automate it. This + a CI server will make your live really &ldquo;easy&rdquo;!</p>

<p>And finally, about the second point. Each developer have their way to do
the things, but usually there are some points that can be fixed and
sometimes because we don&rsquo;t know, other times just because we are lazy
but we post code like this:</p>

<pre><code class="python">def f(a, b, c):
    if (a &lt; 1 and
        request.user and
        request.user.is_authenticated() and request.user.has_perm('write')
    ):
        return HttpResponse(json.dumps('{authorized: True, 'a': a}))
    if a &gt;= 1
        return HttpResponse(json.dumps('{authorized: True, 'a': a}))
</code></pre>

<p>This is just an example, but you should agree with me that it&rsquo;s really
easy to improve. This is what, in my opinion should be more checked in
the reviews.</p>

<p>This was just an example (please, remember that :D), but could be
improved with something like this:</p>

<pre><code class="python">def proper_function_name(proper_variable_name):
    &quot;&quot;&quot;This is an amazing function that will do just a thing.

    :param proper_variable_name: what I am?

    :returns: An HttpResponse object with the following JSON content:

        {'authorized': bool,
         'proper_variable_name: int}

    &quot;&quot;&quot;
    is_authorized = (
        request.user and
        request.user.is_authenticated() and
        request.user.has_perm('write-resource')
    )

    return HttpResponse(
        json.dumps({
            'authorized': is_authorized,
            'proper_variable_name': proper_variable_name
        })
    )
</code></pre>

<p>Those were the improvements (again, remember that it&rsquo;s just an example):</p>

<ol>
<li>Give a proper name to the function. Don&rsquo;t be afraid, everybody has
autocompletion! :D</li>
<li>Give a proper name to the vars.</li>
<li>DOCUMENT! In this example, ready for Sphinx.</li>
<li>Simplify the if statements, actually, after take a look you made it
dissapear.</li>
<li>One return.</li>
</ol>

<p>So, what&rsquo;s your opinion? What do you think that is more important in a
codereview.</p>

<p><a class="btn btn-success" href="codereview-from-the-pov-of-a-noob.html#comments">Leave a comment!</a></p>

</article>



<ul class="pagination center-block text-center">

  <li class="
  
  ">
  <a href="/index.html">&laquo;</a>
  </li>

  
  <li >
  <a href="/index.html">
    1
  </a>
  </li>
  
  <li class="active">
  <a href="/index2.html">
    2
  </a>
  </li>
  
  <li >
  <a href="/index3.html">
    3
  </a>
  </li>
  
  <li >
  <a href="/index4.html">
    4
  </a>
  </li>
   

  <li class="
  
  ">
  <a href="/index3.html">&raquo;</a>
  </li>

</ul>
 

    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="//getbootstrap.com/dist/js/bootstrap.min.js"></script>
    
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-35984509-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    
  </body>
</html>
